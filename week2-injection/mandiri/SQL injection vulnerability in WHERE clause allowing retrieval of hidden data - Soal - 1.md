# Write-up: SQL Injection - Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

<img width="1919" height="893" alt="Screenshot 2025-09-10 210451" src="https://github.com/user-attachments/assets/6d5241e3-7a36-41ac-9089-5f956131a987" />

## 1. Soal
Lab ini memiliki kerentanan SQL injection pada filter kategori produk. Saat pengguna memilih kategori, aplikasi akan menjalankan query SQL seperti berikut:

```sql
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```

Untuk menyelesaikan lab, lakukan serangan SQL injection yang menyebabkan aplikasi menampilkan satu atau lebih produk yang belum dirilis.

## 2. Analisis Kerentanan

Vulnerabilitas terletak pada cara aplikasi memproses input pengguna. Aplikasi secara langsung menyisipkan nilai dari parameter category ke dalam query SQL tanpa melakukan sanitasi atau validasi yang memadai.

Hal ini memungkinkan penyerang untuk menyuntikkan kode SQL berbahaya yang dapat mengubah logika query asli.

<img width="1897" height="975" alt="Screenshot 2025-09-10 212734" src="https://github.com/user-attachments/assets/7618ad90-4831-4ab7-991a-b41f80441990" />


## 3. Jawaban & Bukti
### Metode Eksploitasi

Serangan ini mengeksploitasi query dengan membuat kondisi WHERE selalu bernilai benar.

### Payload yang digunakan:
```
' OR 1=1--
```

' (tanda petik tunggal): Menutup string category='Gifts'.

`OR 1=1: Kondisi logis yang selalu bernilai benar.

--: Komentar di SQL. Bagian query setelahnya (AND released = 1) akan diabaikan.
Contoh :

<img width="1898" height="834" alt="Screenshot 2025-09-10 212756" src="https://github.com/user-attachments/assets/b2b98f5a-69fe-460c-b901-95496526743e" />

### Langkah-langkah Eksekusi

Mengakses Lab
1. Buka lab di browser.

<img width="1897" height="975" alt="Screenshot 2025-09-10 212734" src="https://github.com/user-attachments/assets/7618ad90-4831-4ab7-991a-b41f80441990" />


2. Identifikasi Parameter
Temukan parameter yang rentan, yaitu category, yang ada di URL. Contohnya:
`
/filter?category=Gifts
`

<img width="1898" height="834" alt="Screenshot 2025-09-10 212756" src="https://github.com/user-attachments/assets/b2b98f5a-69fe-460c-b901-95496526743e" />


3. Injeksi Payload
Masukkan payload langsung ke dalam URL setelah parameter category=. URL Kita akan menjadi seperti ini:
`
.../filter?category=Gifts' OR 1=1--
`

Catatan: Spasi di URL biasanya diubah menjadi + atau %20.

4. Verifikasi
Setelah dieksekusi, query yang berjalan di server akan menjadi:
`
SELECT * FROM products WHERE category = 'Gifts' OR 1=1-- AND released = 1'
`

Karena kondisi OR 1=1 selalu benar, database akan mengabaikan filter category dan released, lalu menampilkan semua produk (termasuk yang belum dirilis).

Bukti

Tangkapan layar (screenshot) halaman browser yang berhasil.

<img width="1919" height="747" alt="Screenshot 2025-09-10 212812" src="https://github.com/user-attachments/assets/9df6e45b-68a6-474e-8cec-c9ebee9549b2" />


Lab akan otomatis ditandai sebagai Solved.

## 4. Catatan Hasil Percobaan

Keberhasilan: Serangan berhasil.

Refleksi: Lab ini menunjukkan betapa krusialnya validasi input pada aplikasi web. Celah sederhana di URL dapat digunakan untuk melewati filter dan mengakses data tersembunyi.

Pembelajaran: Memahami cara database memproses query adalah kunci untuk mengidentifikasi dan mengeksploitasi kerentanan SQL Injection.
