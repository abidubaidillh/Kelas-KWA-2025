# Write-up: SQL Injection - Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

## 1. Soal
Lab ini memiliki kerentanan SQL injection pada filter kategori produk. Saat pengguna memilih kategori, aplikasi akan menjalankan query SQL seperti berikut:

```sql
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```

Untuk menyelesaikan lab, lakukan serangan SQL injection yang menyebabkan aplikasi menampilkan satu atau lebih produk yang belum dirilis.

2. Analisis Kerentanan

Vulnerabilitas terletak pada cara aplikasi memproses input pengguna. Aplikasi secara langsung menyisipkan nilai dari parameter category ke dalam query SQL tanpa melakukan sanitasi atau validasi yang memadai.

Hal ini memungkinkan penyerang untuk menyuntikkan kode SQL berbahaya yang dapat mengubah logika query asli.

3. Jawaban & Bukti
Metode Eksploitasi

Serangan ini mengeksploitasi query dengan membuat kondisi WHERE selalu bernilai benar.

Payload yang digunakan:

' OR 1=1--


' (tanda petik tunggal): Menutup string category='Gifts'.

OR 1=1: Kondisi logis yang selalu bernilai benar.

--: Komentar di SQL. Bagian query setelahnya (AND released = 1) akan diabaikan.

Langkah-langkah Eksekusi

Mengakses Lab
Buka lab di browser Anda.

Identifikasi Parameter
Temukan parameter yang rentan, yaitu category, yang ada di URL. Contohnya:

/filter?category=Gifts


Injeksi Payload
Masukkan payload langsung ke dalam URL setelah parameter category=. URL Anda akan menjadi seperti ini:

.../filter?category=Gifts' OR 1=1--


Catatan: Spasi di URL biasanya diubah menjadi + atau %20.

Verifikasi
Setelah dieksekusi, query yang berjalan di server akan menjadi:

SELECT * FROM products WHERE category = 'Gifts' OR 1=1-- AND released = 1'


Karena kondisi OR 1=1 selalu benar, database akan mengabaikan filter category dan released, lalu menampilkan semua produk (termasuk yang belum dirilis).

Bukti

Tangkapan layar (screenshot) halaman browser yang berhasil menampilkan produk-produk yang belum dirilis.

Lab akan otomatis ditandai sebagai Solved.

4. Catatan Hasil Percobaan

Keberhasilan: Serangan berhasil.

Refleksi: Lab ini menunjukkan betapa krusialnya validasi input pada aplikasi web. Celah sederhana di URL dapat digunakan untuk melewati filter dan mengakses data tersembunyi.

Pembelajaran: Memahami cara database memproses query adalah kunci untuk mengidentifikasi dan mengeksploitasi kerentanan SQL Injection.